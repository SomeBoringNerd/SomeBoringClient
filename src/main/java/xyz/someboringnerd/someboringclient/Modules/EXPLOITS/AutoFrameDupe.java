package xyz.someboringnerd.someboringclient.Modules.EXPLOITS;

import net.minecraft.client.Minecraft;
import net.minecraft.entity.Entity;
import net.minecraft.entity.item.EntityItemFrame;
import net.minecraft.item.ItemStack;
import net.minecraft.util.EnumHand;
import net.minecraftforge.common.MinecraftForge;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;
import xyz.someboringnerd.someboringclient.Modules.CATEGORY;
import xyz.someboringnerd.someboringclient.Modules.Module;
import xyz.someboringnerd.someboringclient.Util.ChatUtil;

import java.util.Arrays;

public class AutoFrameDupe extends Module
{

    int target = 0;

    public AutoFrameDupe(String name, CATEGORY cat)
    {
        super(name, cat);

        Create();

        setEnabled(false);
    }

    @Override
    public void Awake()
    {
        frames[0] = null;
        frames[1] = null;
        frames[2] = null;
        frames[3] = null;
    }

    EntityItemFrame[] frames = new EntityItemFrame[4];

    @SubscribeEvent
    public void onPlayerTick(TickEvent.PlayerTickEvent event)
    {
        if(isEnabled()) {

            if (frames[0] == null) {
                //ChatUtil.sendMessageToPlayer("No frame are currently loaded");
                frames[0] = null;
                frames[1] = null;
                frames[2] = null;
                frames[3] = null;
                int i = 0;
                for (Entity entity : Minecraft.getMinecraft().world.getLoadedEntityList()) {
                    if (entity instanceof EntityItemFrame) {
                        ChatUtil.sendMessageToPlayer("we found " + i + " item frames");
                        frames[i] = (EntityItemFrame) entity;
                        i++;
                    }
                }
            } else {
                if (frames[target].getDisplayedItem() != ItemStack.EMPTY) {
                    if (Minecraft.getMinecraft().player.getCooledAttackStrength(0.0f) >= 1.0f) {
                        Minecraft.getMinecraft().playerController.attackEntity(Minecraft.getMinecraft().player, frames[target]);
                        Minecraft.getMinecraft().player.swingArm(EnumHand.MAIN_HAND);
                    }
                } else {
                    Minecraft.getMinecraft().playerController.interactWithEntity(Minecraft.getMinecraft().player, frames[target], EnumHand.MAIN_HAND);
                    Minecraft.getMinecraft().player.swingArm(EnumHand.MAIN_HAND);
                }

                if (target != 3) {
                    target++;
                } else {
                    target = 0;
                }
            }
        }
    }
}
